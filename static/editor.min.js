(function(){function g(a){this.message=a}g.prototype=Error();g.prototype.name="InvalidCharacterError";function k(a){a=String(a).replace(/=+$/,"");if(1==a.length%4)throw new g("'atob' failed: The string to be decoded is not correctly encoded.");for(var d=0,c,e,b=0,f="";e=a.charAt(b++);~e&&(c=d%4?64*c+e:e,d++%4)?f+=String.fromCharCode(255&c>>(-2*d&6)):0)e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e);return f}
var l="undefined"!==typeof window&&window.atob&&window.atob.bind(window)||k;function n(a){return decodeURIComponent(l(a).replace(/(.)/g,function(a,c){a=c.charCodeAt(0).toString(16).toUpperCase();2>a.length&&(a="0"+a);return"%"+a}))}function p(a){a=a.replace(/-/g,"+").replace(/_/g,"/");switch(a.length%4){case 0:break;case 2:a+="==";break;case 3:a+="=";break;default:throw"Illegal base64url string!";}try{return n(a)}catch(d){return l(a)}};r.InvalidTokenError=function(a){this.message=a};r.InvalidTokenError.prototype=Error();r.InvalidTokenError.prototype.name="InvalidTokenError";function r(a,d){if("string"!==typeof a)throw new r.InvalidTokenError("Invalid token specified");d=d||{};d=!0===d.header?0:1;try{return JSON.parse(p(a.split(".")[d]))}catch(c){throw new r.InvalidTokenError("Invalid token specified: "+c.message);}};"function"==typeof window.define&&window.define.amd?window.define("jwt_decode",function(){return r}):window&&(window.jwt_decode=r);var t={stringToUTF8:function(a){if("function"==typeof window.TextEncoder)return(new TextEncoder).encode(a);for(var d=Uint8Array,c=0,e=0;e<a.length;++e){var b=a.charCodeAt(e);55296<=b&&57343>=b&&(b=65536+((b&1023)<<10)|a.charCodeAt(++e)&1023);127>=b?++c:c=2047>=b?c+2:65535>=b?c+3:2097151>=b?c+4:67108863>=b?c+5:c+6}d=new d(c);for(e=c=0;e<a.length;++e)b=a.charCodeAt(e),55296<=b&&57343>=b&&(b=65536+((b&1023)<<10)|a.charCodeAt(++e)&1023),127>=b?d[c++]=b:(2047>=b?d[c++]=192|b>>6:(65535>=b?d[c++]=224|b>>
12:(2097151>=b?d[c++]=240|b>>18:(67108863>=b?d[c++]=248|b>>24:(d[c++]=252|b>>30,d[c++]=128|b>>24&63),d[c++]=128|b>>18&63),d[c++]=128|b>>12&63),d[c++]=128|b>>6&63),d[c++]=128|b&63);return d}};var u={solve:function(a,d,c,e){function b(){q.setUint32(0,m,!1);x.digest("SHA-256",h).then(f)}function f(a){a=new DataView(a);for(var c=0,f=0;32>f;f+=4){var h=a.getUint32(f,!1);if(0==h)c+=32;else{c+=32-Math.floor(Math.log2(h)+1);break}}c>=d?e(m):(++m,b())}var h=(0,t.stringToUTF8)(["nonc\tdecoded.salt\tn",c].join("\t"));h.set(a.match(/.{2}/g).map(function(a){return parseInt(a,16)}),5);var q=new DataView(h.buffer);q.setUint8(18,d);var x=crypto.subtle||crypto.webkitSubtle,m=0;b()}};var v=document.querySelector("form"),w=document.querySelector("textarea"),y=document.querySelector('[name="token"]'),z=document.querySelector('[name="nonce"]'),A=document.querySelector(".btn-save"),B=document.querySelector(".modal-overlay");v.addEventListener("submit",function(a){a.preventDefault()});
A.addEventListener("click",function(){if(""!=w.value.trim()){var a=r(y.value);w.disabled=A.disabled=!0;(0,u.solve)(a.salt,a.n,w.value.replace(/\r\n/g,"\n"),function(a){B.style.display="none";w.disabled=A.disabled=!1;z.value=a;v.submit()})}});}).call(this);
